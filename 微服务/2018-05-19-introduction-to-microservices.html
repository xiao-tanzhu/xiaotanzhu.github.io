<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.wangjingfei.com/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.wangjingfei.com/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.wangjingfei.com/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.xiaotanzhu.com","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"ÊêúÁ¥¢...","empty":"Ê≤°ÊúâÊâæÂà∞‰ªª‰ΩïÊêúÁ¥¢ÁªìÊûúÔºö${query}","hits_time":"ÊâæÂà∞ ${hits} ‰∏™ÊêúÁ¥¢ÁªìÊûúÔºàÁî®Êó∂ ${time} ÊØ´ÁßíÔºâ","hits":"ÊâæÂà∞ ${hits} ‰∏™ÊêúÁ¥¢ÁªìÊûú"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Introduction to Microservices">
<meta property="og:type" content="article">
<meta property="og:title" content="Introduction to Microservices">
<meta property="og:url" content="https://www.xiaotanzhu.com/%E5%BE%AE%E6%9C%8D%E5%8A%A1/2018-05-19-introduction-to-microservices.html">
<meta property="og:site_name" content="Â∞èÁÇ≠Áå™">
<meta property="og:description" content="Introduction to Microservices">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.xiaotanzhu.com/upload/images/25.png">
<meta property="og:image" content="https://www.xiaotanzhu.com/upload/images/26.png">
<meta property="og:image" content="https://www.xiaotanzhu.com/upload/images/27.png">
<meta property="og:image" content="https://www.xiaotanzhu.com/upload/images/28.png">
<meta property="og:image" content="https://www.xiaotanzhu.com/upload/images/29.png">
<meta property="article:published_time" content="2018-05-18T16:00:00.000Z">
<meta property="article:modified_time" content="2018-05-18T16:00:00.000Z">
<meta property="article:author" content="Fify">
<meta property="article:tag" content="ÂæÆÊúçÂä°">
<meta property="article:tag" content="Introduction to Microservices">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.xiaotanzhu.com/upload/images/25.png">


<link rel="canonical" href="https://www.xiaotanzhu.com/%E5%BE%AE%E6%9C%8D%E5%8A%A1/2018-05-19-introduction-to-microservices.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.xiaotanzhu.com/%E5%BE%AE%E6%9C%8D%E5%8A%A1/2018-05-19-introduction-to-microservices.html","path":"ÂæÆÊúçÂä°/2018-05-19-introduction-to-microservices.html","title":"Introduction to Microservices"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Introduction to Microservices | Â∞èÁÇ≠Áå™</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-139248857-1"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-139248857-1","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Â∞èÁÇ≠Áå™" type="application/atom+xml">
<link rel="alternate" href="/rss2.xml" title="Â∞èÁÇ≠Áå™" type="application/rss+xml">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="ÂàáÊç¢ÂØºËà™Ê†è" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Â∞èÁÇ≠Áå™</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">‰∏ÄÂ§ï‰∏ÄÁªΩ‰∏ÄÁºïËä≥Ôºå‰∏ÄÁîü‰∏ÄÂèπ‰∏ÄÁóïÊ≤ô</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>È¶ñÈ°µ</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>ÂΩíÊ°£</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-book fa-fw"></i>ÂàÜÁ±ª</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Ê†áÁ≠æ</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>ÂÖ≥‰∫é</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Á´ôÁÇπÂú∞Âõæ</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>ÊêúÁ¥¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="ÊêúÁ¥¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          ÊñáÁ´†ÁõÆÂΩï
        </li>
        <li class="sidebar-nav-overview">
          Á´ôÁÇπÊ¶ÇËßà
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Introduction-to-Microservices"><span class="nav-number">1.</span> <span class="nav-text">Introduction to Microservices</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Building-Monolithic-Applications"><span class="nav-number">1.1.</span> <span class="nav-text">Building Monolithic Applications</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Marching-Towards-Monolithic-Hell"><span class="nav-number">1.2.</span> <span class="nav-text">Marching Towards Monolithic Hell</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Microservices-%E2%80%93-Tackling-the-Complexity"><span class="nav-number">1.3.</span> <span class="nav-text">Microservices ‚Äì Tackling the Complexity</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-Benefits-of-Microservices"><span class="nav-number">1.4.</span> <span class="nav-text">The Benefits of Microservices</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-Drawbacks-of-Microservices"><span class="nav-number">1.5.</span> <span class="nav-text">The Drawbacks of Microservices</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Summary"><span class="nav-number">1.6.</span> <span class="nav-text">Summary</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Fify"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">Fify</p>
  <div class="site-description" itemprop="description">ÊõæÁªèÊ≤ßÊµ∑Èöæ‰∏∫Ê∞¥ÔºåÈô§Âç¥Â∑´Â±±‰∏çÊòØ‰∫ë„ÄÇ</br>ÂèñÊ¨°Ëä±‰∏õÊáíÂõûÈ°æÔºåÂçäÁºò‰øÆÈÅìÂçäÁºòÂêõ„ÄÇ</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">92</span>
          <span class="site-state-item-name">Êó•Âøó</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">ÂàÜÁ±ª</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">120</span>
        <span class="site-state-item-name">Ê†áÁ≠æ</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/wangjingfei" title="GitHub ‚Üí https:&#x2F;&#x2F;github.com&#x2F;wangjingfei" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="ËøîÂõûÈ°∂ÈÉ®">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.xiaotanzhu.com/%E5%BE%AE%E6%9C%8D%E5%8A%A1/2018-05-19-introduction-to-microservices.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Fify">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Â∞èÁÇ≠Áå™">
      <meta itemprop="description" content="ÊõæÁªèÊ≤ßÊµ∑Èöæ‰∏∫Ê∞¥ÔºåÈô§Âç¥Â∑´Â±±‰∏çÊòØ‰∫ë„ÄÇ</br>ÂèñÊ¨°Ëä±‰∏õÊáíÂõûÈ°æÔºåÂçäÁºò‰øÆÈÅìÂçäÁºòÂêõ„ÄÇ">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Introduction to Microservices | Â∞èÁÇ≠Áå™">
      <meta itemprop="description" content="Introduction to Microservices">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Introduction to Microservices
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">ÂèëË°®‰∫é</span>

      <time title="ÂàõÂª∫Êó∂Èó¥Ôºö2018-05-19 00:00:00" itemprop="dateCreated datePublished" datetime="2018-05-19T00:00:00+08:00">2018-05-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">ÂàÜÁ±ª‰∫é</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" itemprop="url" rel="index"><span itemprop="name">ÂæÆÊúçÂä°</span></a>
        </span>
    </span>

  
    <span id="/%E5%BE%AE%E6%9C%8D%E5%8A%A1/2018-05-19-introduction-to-microservices.html" class="post-meta-item leancloud_visitors" data-flag-title="Introduction to Microservices" title="ÈòÖËØªÊ¨°Êï∞">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">ÈòÖËØªÊ¨°Êï∞Ôºö</span>
      <span class="leancloud-visitors-count"></span>
    </span>
</div>

            <div class="post-description">Introduction to Microservices</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <ul>
<li>TOC</li>
</ul>
<p>{:toc}</p>
<h2 id="Introduction-to-Microservices"><a href="#Introduction-to-Microservices" class="headerlink" title="Introduction to Microservices"></a>Introduction to Microservices</h2><p>Microservices are currently getting a lot of attention: articles, blogs, discussions on social media, and conference presentations. They are rapidly heading towards the peak of inflated expectations on the Gartner Hype cycle. At the same time, there are skeptics in the software community who dismiss microservices as nothing new. Naysayers claim that the idea is just a rebranding of SOA. However, despite both the hype and the skepticism, the Microservices Architecture pattern has significant benefits ‚Äì especially when it comes to enabling the agile development and delivery of complex enterprise applications.</p>
<p>Let‚Äôs first look at why you should consider using microservices.</p>
<h3 id="Building-Monolithic-Applications"><a href="#Building-Monolithic-Applications" class="headerlink" title="Building Monolithic Applications"></a>Building Monolithic Applications</h3><p>Let‚Äôs imagine that you were starting to build a brand new taxi‚Äëhailing application intended to compete with Uber and Hailo. After some preliminary meetings and requirements gathering, you would create a new project either manually or by using a generator that comes with Rails, Spring Boot, Play, or Maven. This new application would have a modular hexagonal architecture, like in the following diagram:</p>
<p><img src="/upload/images/25.png"></p>
<p>At the core of the application is the business logic, which is implemented by modules that define services, domain objects, and events. Surrounding the core are adapters that interface with the external world. Examples of adapters include database access components, messaging components that produce and consume messages, and web components that either expose APIs or implement a UI.</p>
<p>Despite having a logically modular architecture, the application is packaged and deployed as a monolith. The actual format depends on the application‚Äôs language and framework. For example, many Java applications are packaged as WAR files and deployed on application servers such as Tomcat or Jetty. Other Java applications are packaged as self‚Äëcontained executable JARs. Similarly, Rails and Node.js applications are packaged as a directory hierarchy.</p>
<p>Applications written in this style are extremely common. They are simple to develop since our IDEs and other tools are focused on building a single application. These kinds of applications are also simple to test. You can implement end‚Äëto‚Äëend testing by simply launching the application and testing the UI with Selenium. Monolithic applications are also simple to deploy. You just have to copy the packaged application to a server. You can also scale the application by running multiple copies behind a load balancer. In the early stages of the project it works well.</p>
<h3 id="Marching-Towards-Monolithic-Hell"><a href="#Marching-Towards-Monolithic-Hell" class="headerlink" title="Marching Towards Monolithic Hell"></a>Marching Towards Monolithic Hell</h3><p>Unfortunately, this simple approach has a huge limitation. Successful applications have a habit of growing over time and eventually becoming huge. During each sprint, your development team implements a few more stories, which, of course, means adding many lines of code. After a few years, your small, simple application will have grown into a monstrous monolith. To give an extreme example, I recently spoke to a developer who was writing a tool to analyze the dependencies between the thousands of JARs in their multi‚Äëmillion line of code (LOC) application. I‚Äôm sure it took the concerted effort of a large number of developers over many years to create such a beast.</p>
<p>Once your application has become a large, complex monolith, <strong>your development organization is probably in a world of pain</strong>. Any attempts at agile development and delivery will flounder. One major problem is that the application is overwhelmingly complex. It‚Äôs simply too large for any single developer to fully understand. As a result, fixing bugs and implementing new features correctly becomes difficult and time consuming. What‚Äôs more, this tends to be a downwards spiral. If the codebase is difficult to understand, then changes won‚Äôt be made correctly. You will end up with a monstrous, incomprehensible big ball of mud.</p>
<p><strong>The sheer size of the application will also slow down development</strong>. The larger the application, the longer the start‚Äëup time is. For example, in a recent survey some developers reported start‚Äëup times as long as 12 minutes. I‚Äôve also heard anecdotes of applications taking as long as 40 minutes to start up. If developers regularly have to restart the application server, then a large part of their day will be spent waiting around and their productivity will suffer.</p>
<p>Another problem with a large, complex monolithic application is that <strong>it is an obstacle to continuous deployment</strong>. Today, the state of the art for SaaS applications is to push changes into production many times a day. This is extremely difficult to do with a complex monolith since you must redeploy the entire application in order to update any one part of it. The lengthy start‚Äëup times that I mentioned earlier won‚Äôt help either. Also, since the impact of a change is usually not very well understood, it is likely that you have to do extensive manual testing. Consequently, continuous deployment is next to impossible to do.</p>
<p><strong>Monolithic applications can also be difficult to scale when different modules have conflicting resource requirements</strong>. For example, one module might implement CPU‚Äëintensive image processing logic and would ideally be deployed in Amazon EC2 Compute Optimized instances. Another module might be an in‚Äëmemory database and best suited for EC2 Memory‚Äëoptimized instances. However, because these modules are deployed together you have to compromise on the choice of hardware.</p>
<p><strong>Another problem with monolithic applications is reliability</strong>. Because all modules are running within the same process, a bug in any module, such as a memory leak, can potentially bring down the entire process. Moreover, since all instances of the application are identical, that bug will impact the availability of the entire application.</p>
<p>Last but not least, <strong>monolithic applications make it extremely difficult to adopt new frameworks and languages</strong>. For example, let‚Äôs imagine that you have 2 million lines of code written using the XYZ framework. It would be extremely expensive (in both time and cost) to rewrite the entire application to use the newer ABC framework, even if that framework was considerably better. As a result, there is a huge barrier to adopting new technologies. You are stuck with whatever technology choices you made at the start of the project.</p>
<p>To summarize: you have a successful business‚Äëcritical application that has grown into a monstrous monolith that very few, if any, developers understand. It is written using obsolete, unproductive technology that makes hiring talented developers difficult. The application is difficult to scale and is unreliable. As a result, agile development and delivery of applications is impossible.</p>
<p>So what can you do about it?</p>
<h3 id="Microservices-‚Äì-Tackling-the-Complexity"><a href="#Microservices-‚Äì-Tackling-the-Complexity" class="headerlink" title="Microservices ‚Äì Tackling the Complexity"></a>Microservices ‚Äì Tackling the Complexity</h3><p>Many organizations, such as Amazon, eBay, and Netflix, have solved this problem by adopting what is now known as the Microservices Architecture pattern. Instead of building a single monstrous, monolithic application, the idea is to <strong>split your application into set of smaller, interconnected services</strong>.</p>
<p>A service typically implements a set of distinct features or functionality, such as order management, customer management, etc. <strong>Each microservice is a mini‚Äëapplication that has its own hexagonal architecture consisting of business logic along with various adapters</strong>. Some microservices would expose an API that‚Äôs consumed by other microservices or by the application‚Äôs clients. Other microservices might implement a web UI. At runtime, each instance is often a cloud VM or a Docker container.</p>
<p>For example, a possible decomposition of the system described earlier is shown in the following diagram:</p>
<p><img src="/upload/images/26.png"></p>
<p><strong>Each functional area of the application is now implemented by its own microservice</strong>. Moreover, the web application is split into a set of simpler web applications (such as one for passengers and one for drivers in our taxi‚Äëhailing example). This makes it easier to deploy distinct experiences for specific users, devices, or specialized use cases.</p>
<p><strong>Each backend service exposes a REST API and most services consume APIs provided by other services</strong>. For example, Driver Management uses the Notification server to tell an available driver about a potential trip. The UI services invoke the other services in order to render web pages. Services might also use asynchronous, message‚Äëbased communication. Inter‚Äëservice communication will be covered in more detail later in this series.</p>
<p><strong>Some REST APIs are also exposed to the mobile apps used by the drivers and passengers</strong>. The apps don‚Äôt, however, have direct access to the backend services. Instead, communication is mediated by an intermediary known as an <strong>API Gateway</strong>. The API Gateway is responsible for tasks such as load balancing, caching, access control, API metering, and monitoring, and can be implemented effectively using NGINX. Later articles in the series will cover the API Gateway.</p>
<p><img src="/upload/images/27.png"></p>
<p>The Microservices Architecture pattern corresponds to the Y‚Äëaxis scaling of the Scale Cube, which is a 3D model of scalability from the excellent book <em>The Art of Scalability</em>. The other two scaling axes are X‚Äëaxis scaling, which consists of running multiple identical copies of the application behind a load balancer, and Z‚Äëaxis scaling (or data partitioning), where an attribute of the request (for example, the primary key of a row or identity of a customer) is used to route the request to a particular server.</p>
<p>Applications typically use the three types of scaling together. Y‚Äëaxis scaling decomposes the application into microservices as shown above in the first figure in this section. At runtime, X‚Äëaxis scaling runs multiple instances of each service behind a load balancer for throughput and availability. Some applications might also use Z‚Äëaxis scaling to partition the services. The following diagram shows how the Trip Management service might be deployed with Docker running on Amazon EC2.</p>
<p><img src="/upload/images/28.png"></p>
<p>At runtime, the Trip Management service consists of multiple service instances. Each service instance is a Docker container. In order to be highly available, the containers are running on multiple Cloud VMs. In front of the service instances is a load balancer such as NGINX that distributes requests across the instances. The load balancer might also handle other concerns such as caching, access control, API metering, and monitoring.</p>
<p>The Microservices Architecture pattern significantly impacts the relationship between the application and the database. Rather than sharing a single database schema with other services, <strong>each service has its own database schema</strong>. On the one hand, this approach is at odds with the idea of an enterprise‚Äëwide data model. Also, it often results in duplication of some data. However, having a database schema per service is essential if you want to benefit from microservices, because it ensures loose coupling. The following diagram shows the database architecture for the example application.</p>
<p><img src="/upload/images/29.png"></p>
<p>Each of the services has its own database. Moreover, a service can use a type of database that is best suited to its needs, the so‚Äëcalled polyglot persistence architecture. For example, Driver Management, which finds drivers close to a potential passenger, must use a database that supports efficient geo‚Äëqueries.</p>
<p>On the surface, the Microservices Architecture pattern is similar to SOA. With both approaches, the architecture consists of a set of services. However, one way to think about the Microservices Architecture pattern is that it‚Äôs SOA without the commercialization and perceived baggage of web service specifications (WS‚Äë*) and an Enterprise Service Bus (ESB). Microservice‚Äëbased applications favor simpler, lightweight protocols such as REST, rather than WS‚Äë*. They also very much avoid using ESBs and instead implement ESB‚Äëlike functionality in the microservices themselves. The Microservices Architecture pattern also rejects other parts of SOA, such as the concept of a canonical schema.</p>
<h3 id="The-Benefits-of-Microservices"><a href="#The-Benefits-of-Microservices" class="headerlink" title="The Benefits of Microservices"></a>The Benefits of Microservices</h3><p>The Microservices Architecture pattern has a number of important benefits. <strong>First, it tackles the problem of complexity</strong>. It decomposes what would otherwise be a monstrous monolithic application into a set of services. While the total amount of functionality is unchanged, the application has been broken up into manageable chunks or services. Each service has a well‚Äëdefined boundary in the form of an RPC‚Äë or message‚Äëdriven API. The Microservices Architecture pattern enforces a level of modularity that in practice is extremely difficult to achieve with a monolithic code base. Consequently, individual services are much faster to develop, and much easier to understand and maintain.</p>
<p><strong>Second, this architecture enables each service to be developed independently by a team that is focused on that service</strong>. The developers are free to choose whatever technologies make sense, provided that the service honors the API contract. Of course, most organizations would want to avoid complete anarchy and limit technology options. However, this freedom means that developers are no longer obligated to use the possibly obsolete technologies that existed at the start of a new project. When writing a new service, they have the option of using current technology. Moreover, since services are relatively small it becomes feasible to rewrite an old service using current technology.</p>
<p><strong>Third, the Microservices Architecture pattern enables each microservice to be deployed independently</strong>. Developers never need to coordinate the deployment of changes that are local to their service. These kinds of changes can be deployed as soon as they have been tested. The UI team can, for example, perform A/B testing and rapidly iterate on UI changes. The Microservices Architecture pattern makes continuous deployment possible.</p>
<p><strong>Finally, the Microservices Architecture pattern enables each service to be scaled independently</strong>. You can deploy just the number of instances of each service that satisfy its capacity and availability constraints. Moreover, you can use the hardware that best matches a service‚Äôs resource requirements. For example, you can deploy a CPU‚Äëintensive image processing service on EC2 Compute Optimized instances and deploy an in‚Äëmemory database service on EC2 Memory‚Äëoptimized instances.</p>
<h3 id="The-Drawbacks-of-Microservices"><a href="#The-Drawbacks-of-Microservices" class="headerlink" title="The Drawbacks of Microservices"></a>The Drawbacks of Microservices</h3><p>As Fred Brooks wrote almost 30 years ago, there are no silver bullets. Like every other technology, the Microservices architecture has drawbacks. <strong>One drawback is the name itself. The term <em>microservice</em> places excessive emphasis on service size</strong>. In fact, there are some developers who advocate for building extremely fine‚Äëgrained 10‚Äì100 LOC services. While small services are preferable, it‚Äôs important to remember that they are a means to an end and not the primary goal. The goal of microservices is to sufficiently decompose the application in order to facilitate agile application development and deployment.</p>
<p><strong>Another major drawback of microservices is the complexity that arises from the fact that a microservices application is a distributed system</strong>. Developers need to choose and implement an inter‚Äëprocess communication mechanism based on either messaging or RPC. Moreover, they must also write code to handle partial failure since the destination of a request might be slow or unavailable. While none of this is rocket science, it‚Äôs much more complex than in a monolithic application where modules invoke one another via language‚Äëlevel method/procedure calls.</p>
<p><strong>Another challenge with microservices is the partitioned database architecture</strong>. Business transactions that update multiple business entities are fairly common. These kinds of transactions are trivial to implement in a monolithic application because there is a single database. In a microservices‚Äëbased application, however, you need to update multiple databases owned by different services. Using distributed transactions is usually not an option, and not only because of the CAP theorem. They simply are not supported by many of today‚Äôs highly scalable NoSQL databases and messaging brokers. You end up having to use an eventual consistency based approach, which is more challenging for developers.</p>
<p><strong>Testing a microservices application is also much more complex</strong>. For example, with a modern framework such as Spring Boot it is trivial to write a test class that starts up a monolithic web application and tests its REST API. In contrast, a similar test class for a service would need to launch that service and any services that it depends upon (or at least configure stubs for those services). Once again, this is not rocket science but it‚Äôs important to not underestimate the complexity of doing this.</p>
<p><strong>Another major challenge with the Microservices Architecture pattern is implementing changes that span multiple services</strong>. For example, let‚Äôs imagine that you are implementing a story that requires changes to services A, B, and C, where A depends upon B and B depends upon C. In a monolithic application you could simply change the corresponding modules, integrate the changes, and deploy them in one go. In contrast, in a Microservices Architecture pattern you need to carefully plan and coordinate the rollout of changes to each of the services. For example, you would need to update service C, followed by service B, and then finally service A. Fortunately, most changes typically impact only one service and multi‚Äëservice changes that require coordination are relatively rare.</p>
<p><strong>Deploying a microservices‚Äëbased application is also much more complex</strong>. A monolithic application is simply deployed on a set of identical servers behind a traditional load balancer. Each application instance is configured with the locations (host and ports) of infrastructure services such as the database and a message broker. In contrast, a microservice application typically consists of a large number of services. For example, Hailo has 160 different services and Netflix has over 600 according to Adrian Cockcroft <em>[Editor ‚Äì Hailo has been acquired by MyTaxi.]</em>. Each service will have multiple runtime instances. That‚Äôs many more moving parts that need to be configured, deployed, scaled, and monitored. In addition, you will also need to implement a service discovery mechanism (discussed in a later post) that enables a service to discover the locations (hosts and ports) of any other services it needs to communicate with. Traditional trouble ticket‚Äëbased and manual approaches to operations cannot scale to this level of complexity. Consequently, successfully deploying a microservices application requires greater control of deployment methods by developers, and a high level of automation.</p>
<p>One approach to automation is to use an off‚Äëthe‚Äëshelf PaaS such as Cloud Foundry. A PaaS provides developers with an easy way to deploy and manage their microservices. It insulates them from concerns such as procuring and configuring IT resources. At the same time, the systems and network professionals who configure the PaaS can ensure compliance with best practices and with company policies. Another way to automate the deployment of microservices is to develop what is essentially your own PaaS. One typical starting point is to use a clustering solution, such as Kubernetes, in conjunction with a technology such as Docker. Later in this series we will look at how software‚Äëbased application delivery approaches like NGINX, which easily handles caching, access control, API metering, and monitoring at the microservice level, can help solve this problem.</p>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p>Building complex applications is inherently difficult. A Monolithic architecture only makes sense for simple, lightweight applications. You will end up in a world of pain if you use it for complex applications. <strong>The Microservices architecture pattern is the better choice for complex, evolving applications despite the drawbacks and implementation challenges</strong>.</p>
<br><hr><b>ËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§ÑÔºö</b><a href="https://www.xiaotanzhu.com/%E5%BE%AE%E6%9C%8D%E5%8A%A1/2018-05-19-introduction-to-microservices.html" target="_blank">Introduction to Microservices</a><br><b>ÂéüÊñáÂú∞ÂùÄÔºö</b>https://www.xiaotanzhu.com/%E5%BE%AE%E6%9C%8D%E5%8A%A1/2018-05-19-introduction-to-microservices.html
    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" rel="tag"># ÂæÆÊúçÂä°</a>
              <a href="/tags/introduction-to-microservices/" rel="tag"># Introduction to Microservices</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/spring/2018-03-07-spring-cloud-components.html" rel="prev" title="Spring CloudÁªÑ‰ª∂‰ªãÁªç">
                  <i class="fa fa-chevron-left"></i> Spring CloudÁªÑ‰ª∂‰ªãÁªç
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/spring/2018-07-01-simple-springcloud.html" rel="next" title="Spring Cloud(‰∏Ä)ÔºöÂ§ßËØùSpring Cloud">
                  Spring Cloud(‰∏Ä)ÔºöÂ§ßËØùSpring Cloud <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2012 ‚Äì 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Fify</span>
</div>
  <div class="powered-by">Áî± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a> Âº∫ÂäõÈ©±Âä®
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.wangjingfei.com/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.wangjingfei.com/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.wangjingfei.com/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  
<script src="https://cdn.wangjingfei.com/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script src="/js/third-party/fancybox.js"></script>


  


  <script class="next-config" data-name="leancloud_visitors" type="application/json">{"enable":true,"app_id":"jNm9RvVK687BefTDdg0tXgvf-MdYXbMMI","app_key":"7ejdgq34iVUrKwhqPjLYqAQX","server_url":null,"security":false}</script>
  <script src="/js/third-party/statistics/lean-analytics.js"></script>


<script src="https://cdn.wangjingfei.com/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>

<script>
var options = {
  bottom: '16px',
  right: '20px',
  left: 'unset',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#100f2c',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: 'üåì',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script>
<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"xiaotanzhu","count":false,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script>

</body>
</html>
