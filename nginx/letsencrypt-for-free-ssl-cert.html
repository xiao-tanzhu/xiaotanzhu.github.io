<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.wangjingfei.com/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.wangjingfei.com/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.wangjingfei.com/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.xiaotanzhu.com","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="ä½¿ç”¨Let&#39;s Encryptå…è´¹è¯ä¹¦è®©ä½ çš„ç½‘ç«™SSLåŒ–ï¼Œå¹¶ä¸”å¯ç”¨è‡ªåŠ¨ç»­æœŸ">
<meta property="og:type" content="article">
<meta property="og:title" content="ä½¿ç”¨Let&#39;s Encryptå…è´¹è¯ä¹¦è®©ä½ çš„ç½‘ç«™SSLåŒ–">
<meta property="og:url" content="https://www.xiaotanzhu.com/nginx/letsencrypt-for-free-ssl-cert.html">
<meta property="og:site_name" content="å°ç‚­çŒª">
<meta property="og:description" content="ä½¿ç”¨Let&#39;s Encryptå…è´¹è¯ä¹¦è®©ä½ çš„ç½‘ç«™SSLåŒ–ï¼Œå¹¶ä¸”å¯ç”¨è‡ªåŠ¨ç»­æœŸ">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-05-08T16:00:00.000Z">
<meta property="article:modified_time" content="2021-05-08T16:00:00.000Z">
<meta property="article:author" content="Fify">
<meta property="article:tag" content="Ubuntu">
<meta property="article:tag" content="Github Pages">
<meta property="article:tag" content="Ubuntu 20.04">
<meta property="article:tag" content="Nignx">
<meta property="article:tag" content="SSL">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://www.xiaotanzhu.com/nginx/letsencrypt-for-free-ssl-cert.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.xiaotanzhu.com/nginx/letsencrypt-for-free-ssl-cert.html","path":"nginx/letsencrypt-for-free-ssl-cert.html","title":"ä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦è®©ä½ çš„ç½‘ç«™SSLåŒ–"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>ä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦è®©ä½ çš„ç½‘ç«™SSLåŒ– | å°ç‚­çŒª</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-139248857-1"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-139248857-1","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="å°ç‚­çŒª" type="application/atom+xml">
<link rel="alternate" href="/rss2.xml" title="å°ç‚­çŒª" type="application/rss+xml">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">å°ç‚­çŒª</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">ä¸€å¤•ä¸€ç»½ä¸€ç¼•èŠ³ï¼Œä¸€ç”Ÿä¸€å¹ä¸€ç—•æ²™</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-book fa-fw"></i>åˆ†ç±»</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>ç«™ç‚¹åœ°å›¾</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E"><span class="nav-number">1.</span> <span class="nav-text">è¯´æ˜</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#About-certbot"><span class="nav-number">2.</span> <span class="nav-text">About certbot</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E7%8E%AF%E5%A2%83"><span class="nav-number">3.</span> <span class="nav-text">ä½¿ç”¨ç¯å¢ƒ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B"><span class="nav-number">4.</span> <span class="nav-text">å®‰è£…è¿‡ç¨‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SSH-into-the-server"><span class="nav-number">4.1.</span> <span class="nav-text">SSH into the server</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Install-snapd"><span class="nav-number">4.2.</span> <span class="nav-text">Install snapd</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ensure-that-your-version-of-snapd-is-up-to-date"><span class="nav-number">4.3.</span> <span class="nav-text">Ensure that your version of snapd is up to date</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Remove-certbot-auto-and-any-Certbot-OS-packages"><span class="nav-number">4.4.</span> <span class="nav-text">Remove certbot-auto and any Certbot OS packages</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Install-Certbot"><span class="nav-number">4.5.</span> <span class="nav-text">Install Certbot</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Prepare-the-Certbot-command"><span class="nav-number">4.6.</span> <span class="nav-text">Prepare the Certbot command</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Get-certificates-and-or-install-certificates"><span class="nav-number">4.7.</span> <span class="nav-text">Get certificates and&#x2F;or install certificates</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Get-and-Install"><span class="nav-number">4.7.1.</span> <span class="nav-text">Get and Install</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Just-get-a-certificate"><span class="nav-number">4.7.2.</span> <span class="nav-text">Just get a certificate</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Test-automatic-renewal"><span class="nav-number">4.8.</span> <span class="nav-text">Test automatic renewal</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Confirm-that-Certbot-worked"><span class="nav-number">4.9.</span> <span class="nav-text">Confirm that Certbot worked</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Fify"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">Fify</p>
  <div class="site-description" itemprop="description">æ›¾ç»æ²§æµ·éš¾ä¸ºæ°´ï¼Œé™¤å´å·«å±±ä¸æ˜¯äº‘ã€‚</br>å–æ¬¡èŠ±ä¸›æ‡’å›é¡¾ï¼ŒåŠç¼˜ä¿®é“åŠç¼˜å›ã€‚</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">83</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">115</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/wangjingfei" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;wangjingfei" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.xiaotanzhu.com/nginx/letsencrypt-for-free-ssl-cert.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Fify">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å°ç‚­çŒª">
      <meta itemprop="description" content="æ›¾ç»æ²§æµ·éš¾ä¸ºæ°´ï¼Œé™¤å´å·«å±±ä¸æ˜¯äº‘ã€‚</br>å–æ¬¡èŠ±ä¸›æ‡’å›é¡¾ï¼ŒåŠç¼˜ä¿®é“åŠç¼˜å›ã€‚">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="ä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦è®©ä½ çš„ç½‘ç«™SSLåŒ– | å°ç‚­çŒª">
      <meta itemprop="description" content="ä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦è®©ä½ çš„ç½‘ç«™SSLåŒ–ï¼Œå¹¶ä¸”å¯ç”¨è‡ªåŠ¨ç»­æœŸ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦è®©ä½ çš„ç½‘ç«™SSLåŒ–
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-05-09 00:00:00" itemprop="dateCreated datePublished" datetime="2021-05-09T00:00:00+08:00">2021-05-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/nginx/" itemprop="url" rel="index"><span itemprop="name">Nginx</span></a>
        </span>
    </span>

  
    <span id="/nginx/letsencrypt-for-free-ssl-cert.html" class="post-meta-item leancloud_visitors" data-flag-title="ä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦è®©ä½ çš„ç½‘ç«™SSLåŒ–" title="é˜…è¯»æ¬¡æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
      <span class="leancloud-visitors-count"></span>
    </span>
</div>

            <div class="post-description">ä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦è®©ä½ çš„ç½‘ç«™SSLåŒ–ï¼Œå¹¶ä¸”å¯ç”¨è‡ªåŠ¨ç»­æœŸ</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p><a target="_blank" rel="noopener" href="https://letsencrypt.org/">Letâ€™s Encrypt</a>æ˜¯ä¸€ä¸ªå…è´¹é¢å‘SSLè¯ä¹¦çš„éç›ˆåˆ©ç»„ç»‡ï¼Œå…¶é¢å¸ƒçš„è¯ä¹¦å·²è¢«Chromeç­‰ä¸»æµæµè§ˆå™¨è®¤å¯ã€‚GitHub Pagesç«™ç‚¹é»˜è®¤ä½¿ç”¨çš„SSLè¯ä¹¦ä¹Ÿæ˜¯<a target="_blank" rel="noopener" href="https://letsencrypt.org/">Letâ€™s Encrypt</a>æä¾›çš„ã€‚</p>
<p>æ­¤æ–‡ä¸»è¦è§£å†³ï¼š</p>
<ol>
<li>å¦‚ä½•ä½¿ç”¨<a target="_blank" rel="noopener" href="https://letsencrypt.org/">Letâ€™s Encrypt</a>ä¸ºæˆ‘ä»¬çš„åŸŸåé¢å‘è¯ä¹¦</li>
<li>é¢å‘çš„è¯ä¹¦å¦‚ä½•è‡ªåŠ¨æ›´æ–°æœ‰æ•ˆæ—¶é—´</li>
</ol>
<h2 id="About-certbot"><a href="#About-certbot" class="headerlink" title="About certbot"></a>About certbot</h2><p>æœ¬æ–‡ä½¿ç”¨Certbotå®ŒæˆHTTPSçš„è‡ªåŠ¨é¢å‘å’Œç»­æœŸã€‚å…¶<a target="_blank" rel="noopener" href="https://certbot.eff.org/about/">å®˜æ–¹ä»‹ç»</a>å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>Certbot is a free, open source software tool for automatically using Letâ€™s Encrypt certificates on manually-administrated websites to enable HTTPS.<br>Certbot is made by the Electronic Frontier Foundation (EFF), a 501(c)3 nonprofit based in San Francisco, CA, that defends digital privacy, free speech, and innovation.  </p>
</blockquote>
<h2 id="ä½¿ç”¨ç¯å¢ƒ"><a href="#ä½¿ç”¨ç¯å¢ƒ" class="headerlink" title="ä½¿ç”¨ç¯å¢ƒ"></a>ä½¿ç”¨ç¯å¢ƒ</h2><ul>
<li>WebæœåŠ¡å™¨ï¼šNginx 1.18.0</li>
<li>å®¿ä¸»æœåŠ¡å™¨ï¼šUbuntu 20.04</li>
</ul>
<p>è¯´æ˜ï¼šå¦‚æœä¸æ˜¯ä½¿ç”¨çš„ä»¥ä¸Šä¸¤ä¸ªæœåŠ¡å™¨æˆ–ç‰ˆæœ¬ï¼Œå¯ä½¿ç”¨Certbotå®˜ç½‘é€‰æ‹©å¯¹åº”æœåŠ¡å™¨å’Œç‰ˆæœ¬ã€‚</p>
<h2 id="å®‰è£…è¿‡ç¨‹"><a href="#å®‰è£…è¿‡ç¨‹" class="headerlink" title="å®‰è£…è¿‡ç¨‹"></a>å®‰è£…è¿‡ç¨‹</h2><h3 id="SSH-into-the-server"><a href="#SSH-into-the-server" class="headerlink" title="SSH into the server"></a>SSH into the server</h3><p>SSH into the server running your HTTP website as a user with sudo privileges.</p>
<h3 id="Install-snapd"><a href="#Install-snapd" class="headerlink" title="Install snapd"></a>Install snapd</h3><p>Youâ€™ll need to install snapd and make sure you follow any instructions to enable classic snap support.<br>Follow these <a target="_blank" rel="noopener" href="https://snapcraft.io/docs/installing-snapd">instructions on snapcraftâ€™s site to install snapd</a>.</p>
<blockquote>
<p>If youâ€™re running Ubuntu 16.04 LTS (Xenial Xerus) or later, including Ubuntu 18.04 LTS (Bionic Beaver), Ubuntu 18.10 (Cosmic Cuttlefish) and Ubuntu 19.10 (Eoan Ermine), you donâ€™t need to do anything. Snap is already installed and ready to go.</p>
</blockquote>
<h3 id="Ensure-that-your-version-of-snapd-is-up-to-date"><a href="#Ensure-that-your-version-of-snapd-is-up-to-date" class="headerlink" title="Ensure that your version of snapd is up to date"></a>Ensure that your version of snapd is up to date</h3><p>Execute the following instructions on the command line on the machine to ensure that you have the latest version of snapd.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo snap install core; sudo snap refresh core</span><br></pre></td></tr></table></figure>

<h3 id="Remove-certbot-auto-and-any-Certbot-OS-packages"><a href="#Remove-certbot-auto-and-any-Certbot-OS-packages" class="headerlink" title="Remove certbot-auto and any Certbot OS packages"></a>Remove certbot-auto and any Certbot OS packages</h3><p>If you have any Certbot packages installed using an OS package manager like apt, dnf, or yum, you should remove them before installing the Certbot snap to ensure that when you run the command certbot the snap is used rather than the installation from your OS package manager.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove certbot, sudo dnf remove certbot</span><br></pre></td></tr></table></figure>

<p>If you previously used Certbot through the certbot-auto script, you should also remove its installation by following the instructions <a target="_blank" rel="noopener" href="https://certbot.eff.org/docs/uninstall.html">here</a>.</p>
<h3 id="Install-Certbot"><a href="#Install-Certbot" class="headerlink" title="Install Certbot"></a>Install Certbot</h3><p>Run this command on the command line on the machine to install Certbot.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo snap install --classic certbot</span><br></pre></td></tr></table></figure>

<h3 id="Prepare-the-Certbot-command"><a href="#Prepare-the-Certbot-command" class="headerlink" title="Prepare the Certbot command"></a>Prepare the Certbot command</h3><p>Execute the following instruction on the command line on the machine to ensure that the <code>certbot</code> command can be run.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s /snap/bin/certbot /usr/bin/certbot</span><br></pre></td></tr></table></figure>

<h3 id="Get-certificates-and-or-install-certificates"><a href="#Get-certificates-and-or-install-certificates" class="headerlink" title="Get certificates and/or install certificates"></a>Get certificates and/or install certificates</h3><h4 id="Get-and-Install"><a href="#Get-and-Install" class="headerlink" title="Get and Install"></a>Get and Install</h4><p>Run this command to get a certificate and have Certbot edit your Nginx configuration automatically to serve it, turning on HTTPS access in a single step.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot --nginx</span><br></pre></td></tr></table></figure>

<h4 id="Just-get-a-certificate"><a href="#Just-get-a-certificate" class="headerlink" title="Just get a certificate"></a>Just get a certificate</h4><p>If youâ€™re feeling more conservative and would like to make the changes to your Nginx configuration by hand, run this command.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot certonly --nginx</span><br></pre></td></tr></table></figure>

<h3 id="Test-automatic-renewal"><a href="#Test-automatic-renewal" class="headerlink" title="Test automatic renewal"></a>Test automatic renewal</h3><p>The Certbot packages on your system come with a cron job or systemd timer that will renew your certificates automatically before they expire. You will not need to run Certbot again, unless you change your configuration. You can test automatic renewal for your certificates by running this command:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot renew --dry-run</span><br></pre></td></tr></table></figure>

<p>The command to renew certbot is installed in one of the following locations:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/etc/</span>crontab/</span><br><span class="line"><span class="regexp">/etc/</span>cron.*/*</span><br><span class="line">systemctl list-timers</span><br></pre></td></tr></table></figure>

<p>My timers would be:</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@us</span><span class="symbol">:/var/log/nginx</span><span class="comment"># systemctl list-timers</span></span><br><span class="line"><span class="title class_">NEXT</span>                        <span class="title class_">LEFT</span>          <span class="title class_">LAST</span>                        <span class="title class_">PASSED</span>      <span class="title class_">UNIT</span>                         <span class="title class_">ACTIVATES</span></span><br><span class="line"><span class="title class_">Sun</span> <span class="number">2021</span><span class="number">-05</span><span class="number">-09</span> <span class="number">13</span><span class="symbol">:</span><span class="number">20</span><span class="symbol">:</span><span class="number">00</span> <span class="title class_">CST</span> <span class="number">1</span>h <span class="number">57</span>min left <span class="title class_">Sun</span> <span class="number">2021</span><span class="number">-05</span><span class="number">-09</span> <span class="number">01</span><span class="symbol">:</span><span class="number">22</span><span class="symbol">:</span><span class="number">05</span> <span class="title class_">CST</span> <span class="number">10</span>h ago     snap.certbot.renew.timer     snap.certbot.renew.service</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="Confirm-that-Certbot-worked"><a href="#Confirm-that-Certbot-worked" class="headerlink" title="Confirm that Certbot worked"></a>Confirm that Certbot worked</h3><p>To confirm that your site is set up properly, visit <a target="_blank" rel="noopener" href="https://yourwebsite.com/">https://yourwebsite.com/</a> in your browser and look for the lock icon in the URL bar.</p>
<br><hr><b>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼š</b><a href="https://www.xiaotanzhu.com/nginx/letsencrypt-for-free-ssl-cert.html" target="_blank">ä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦è®©ä½ çš„ç½‘ç«™SSLåŒ–</a><br><b>åŸæ–‡åœ°å€ï¼š</b>https://www.xiaotanzhu.com/nginx/letsencrypt-for-free-ssl-cert.html
    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/ubuntu/" rel="tag"># Ubuntu</a>
              <a href="/tags/github-pages/" rel="tag"># Github Pages</a>
              <a href="/tags/ubuntu-20-04/" rel="tag"># Ubuntu 20.04</a>
              <a href="/tags/nignx/" rel="tag"># Nignx</a>
              <a href="/tags/ssl/" rel="tag"># SSL</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/powerbi/powerbi-howtos.html" rel="prev" title="PowerBIå¸¸è§æ“ä½œ">
                  <i class="fa fa-chevron-left"></i> PowerBIå¸¸è§æ“ä½œ
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/macos/macos-howtos.html" rel="next" title="MacOSå¸¸è§æ“ä½œ">
                  MacOSå¸¸è§æ“ä½œ <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2012 â€“ 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Fify</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.wangjingfei.com/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.wangjingfei.com/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.wangjingfei.com/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  
<script src="https://cdn.wangjingfei.com/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script src="/js/third-party/fancybox.js"></script>


  


  <script class="next-config" data-name="leancloud_visitors" type="application/json">{"enable":true,"app_id":"jNm9RvVK687BefTDdg0tXgvf-MdYXbMMI","app_key":"7ejdgq34iVUrKwhqPjLYqAQX","server_url":null,"security":false}</script>
  <script src="/js/third-party/statistics/lean-analytics.js"></script>


<script src="https://cdn.wangjingfei.com/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>

<script>
var options = {
  bottom: '16px',
  right: '20px',
  left: 'unset',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#100f2c',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: 'ğŸŒ“',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script>
<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"xiaotanzhu","count":false,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script>

</body>
</html>
